---
title: "607_3A"
author: "Desiree Thomas"
format: html
editor: visual
---

## Approach

First I will have to load in my dataset. I need to find the missing values and replace them with a calculated estimate. Next I will need to calculate the baseline estimates, calculculate the overall mean, calculate the movie bias, and user bias. I'll generate the predictions by filtering for the unrated movies, merge the biases, and apply the formula. I will also need to cap the outliers to prevent it from scaling higher than the 5 point rating system we established. I can sort the users and isolate the highest picked movie per user. To make sure that I am actually performing the calculations correctly in my code, what I can do is for one or two of them, I can do a manual calculation as a quality check; I'll compare what I got to the outpu I received from the code. Some challenges I predict are simply working through the math and ensuring that my code is correct along with the potential need to debug. 


#Load Libraries and Dataset

```{r}
library(tidyverse)
library(dplyr)
library(readr)
library(readr) 

raw_data <- read_csv("https://raw.githubusercontent.com/desithomas/DATA607_3A/refs/heads/main/excel_version_survey_results2.csv")
```

```{r}
#Calculate the overall mean

overall_mean <- raw_data %>% summarize(mean_value = mean(rating, na.rm = TRUE)) %>%
  pull(mean_value)

#output shows as 3.04 which was the same as the manual calculation in the .xlsx version of the file
overall_mean
```
```{r}

#Calculate the item bias 

movie_bias <- raw_data %>% 
  group_by(movie_title) %>%
  summarize(bi = mean(rating, na.rm = TRUE) - overall_mean)
  
movie_bias
  
```
```{r}
#Calculate the user bias 

user_bias <- raw_data %>% 
    group_by(profile_name) %>%
    summarize(bu = mean(rating, na.rm = TRUE) - overall_mean)
#Adam Stevens output matches manual calculation found in the .xlsx file Sheet 1
user_bias

```

```{r}
# calculate the predicted rating aka rui

predicted_rating <- raw_data %>% 
  filter(is.na(rating)) %>%
  left_join(movie_bias, by ="movie_title") %>%
  left_join(user_bias, by = "profile_name") %>%
  #this runs the formula provided in the slides for the Predicted Rating 
  mutate(predicted_rating = overall_mean + bi + bu)


```

